<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BudgetWise | View Expenses</title>

    <style>
        body{
            margin:0;
            font-family:'Segoe UI',sans-serif;
            background:#f4f6fb;
        }

        .container{
            max-width:900px;
            margin:40px auto;
            background:white;
            padding:25px;
            border-radius:14px;
            box-shadow:0 10px 25px rgba(0,0,0,0.1);
        }

        h2{
            text-align:center;
            color:#1e2a5a;
            margin-bottom:20px;
        }

        table{
            width:100%;
            border-collapse:collapse;
        }

        th,td{
            padding:12px;
            text-align:center;
        }

        th{
            background:#1e2a5a;
            color:white;
        }

        tr:nth-child(even){
            background:#f2f2f2;
        }

        .action-btn{
            padding:6px 12px;
            border:none;
            border-radius:4px;
            cursor:pointer;
            font-size:14px;
        }

        .edit-btn{
            background:#4caf50;
            color:white;
        }

        .delete-btn{
            background:#f44336;
            color:white;
        }

        .back-btn{
            margin-top:20px;
            width:100%;
            padding:12px;
            border:none;
            border-radius:6px;
            background:#1e2a5a;
            color:white;
            font-size:16px;
            cursor:pointer;
        }
    </style>
</head>

<body>

<div class="container">
    <h2>Expense List</h2>

    <table>
        <thead>
        <tr>
            <th>#</th>
            <th>Title</th>
            <th>Category</th>
            <th>Date</th> <!-- ✅ DATE COLUMN -->
            <th>Amount (₹)</th>
            <th>Actions</th>
        </tr>
        </thead>
        <tbody id="expenseTable"></tbody>
    </table>

    <button class="back-btn" onclick="goDashboard()">Back to Dashboard</button>
</div>

<script>
    let expenses = JSON.parse(localStorage.getItem("expenses")) || [];
    let table = document.getElementById("expenseTable");

    function loadExpenses(){
        table.innerHTML="";
        expenses.forEach((exp,index)=>{
            table.innerHTML += `
            <tr>
                <td>${index+1}</td>
                <td>${exp.title}</td>
                <td>${exp.category}</td>
                <td>${exp.date || "-"}</td> <!-- ✅ DATE DISPLAY -->
                <td>${exp.amount}</td>
                <td>
                    <button class="action-btn edit-btn" onclick="editExpense(${index})">Edit</button>
                    <button class="action-btn delete-btn" onclick="deleteExpense(${index})">Delete</button>
                </td>
            </tr>
            `;
        });
    }

    function deleteExpense(index){
        if(confirm("Are you sure you want to delete this expense?")){
            expenses.splice(index,1);
            localStorage.setItem("expenses",JSON.stringify(expenses));
            loadExpenses();
        }
    }

    function editExpense(index){
        let newTitle = prompt("Edit Expense Title", expenses[index].title);
        let newAmount = prompt("Edit Amount", expenses[index].amount);
        let newDate = prompt("Edit Date (YYYY-MM-DD)", expenses[index].date || "");

        if(newTitle && newAmount){
            expenses[index].title = newTitle;
            expenses[index].amount = Number(newAmount);
            expenses[index].date = newDate; // ✅ DATE UPDATED
            localStorage.setItem("expenses",JSON.stringify(expenses));
            loadExpenses();
        }
    }

    function goDashboard(){
        window.location.href="dashboard.html";
    }

    loadExpenses();
</script>

</body>
</html>